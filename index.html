<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√úberraschung!</title>
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#2a3b4c">
    <style>
        /* Das CSS von vorhin bleibt exakt gleich */
        @keyframes confetti-fall { 0% { transform: translateY(-100%) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        @keyframes icon-bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #2a3b4c; color: #ffffff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; text-align: center; }
        .container { animation: icon-bounce 2s infinite ease-in-out; }
        h1 { font-size: 2.5rem; color: #f0c04a; text-shadow: 0 0 10px #f0c04a; }
        p { font-size: 1.5rem; }
        .icon { font-size: 5rem; display: block; margin-bottom: 1rem; }
        .confetti { position: fixed; top: 0; left: 0; width: 10px; height: 20px; opacity: 0; animation: confetti-fall 5s linear infinite; }

        /* Sternchen-Animation */
        @keyframes star-fall { 0% { transform: translateY(-10px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
        .star { position: fixed; top: -10px; color: #fff; font-size: 1em; text-shadow: 0 0 5px rgba(255,255,255,0.8); animation: star-fall linear forwards; z-index: 10; pointer-events: none; }
    </style>
</head>
<body>
    <div class="container">
        <span class="icon" id="b-icon">üéÅ</span>
        <h1 id="b-title">...</h1>
        <p id="b-message">...</p>
    </div>

    <script>
        // --- NEUE TENANT-LOGIK ---
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Tenant aus URL lesen (genau wie bei Ihrer PWA)
            const params = new URLSearchParams(window.location.search);
            const tenantId = params.get('tenant') || 'default';

            // 2. Passende Konfiguration laden
            fetch(`branding/${tenantId}/config.json`)
                .then(response => {
                    if (!response.ok) {
                        // Fallback, wenn Tenant nicht existiert
                        return fetch('branding/default/config.json');
                    }
                    return response.json();
                })
                //.then(response => response.json())
                .then(config => {
                    // 3. Seite mit Tenant-Daten f√ºllen
                    document.getElementById('b-icon').textContent = config.icon;
                    document.getElementById('b-title').textContent = config.title;
                    document.getElementById('b-message').innerHTML = config.message;
                    document.title = config.name; // Browser-Tab-Titel
                })
                .catch(err => {
                    console.error('Konnte Konfiguration nicht laden:', err);
                    document.getElementById('b-title').textContent = "Hoppla!";
                    document.getElementById('b-message').textContent = "Hier ist was schiefgelaufen.";
                });
            
            // 4. Konfetti (unver√§ndert)
            startConfetti();

            // 5. Sternchen-Animation
            startStars();
        });

        function startConfetti() {
            function createConfetti() {
                const colors = ['#f0c04a', '#d54b2a', '#34a853', '#4285f4'];
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 5 + 's';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                document.body.appendChild(confetti);

                setTimeout(() => { confetti.remove(); }, 5000);
            }
            for (let i = 0; i < 100; i++) {
                setTimeout(createConfetti, i * 50);
            }
        }

        function startStars() {
            function createStar() {
                const symbols = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '‚ú®', '‚≠ê'];
                const star = document.createElement('div');
                star.className = 'star';
                star.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                star.style.left = Math.random() * 100 + 'vw';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                star.style.opacity = Math.random() * 0.8 + 0.2;
                star.style.fontSize = (Math.random() * 20 + 10) + 'px';
                document.body.appendChild(star);

                setTimeout(() => { star.remove(); }, 5000);
            }
            for (let i = 0; i < 60; i++) {
                setTimeout(createStar, i * 50);
            }
        }
    </script>
</body>

</html>
